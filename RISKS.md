# 风险台账

| 风险ID | 描述 | 触发条件 | 影响 | 缓解措施 | 状态 |
| --- | --- | --- | --- | --- | --- |
| R1 | `task-manager-mcp` 工具调用失败导致流程不合规 | 任何 task-manager 工具返回错误 | 高 | 记录失败、查阅文档、必要时采用手工计划并在日志说明 | 开放 |
| R2 | 无法访问或同步 `modelcontextprotocol/typescript-sdk` 仓库 | 网络或权限受限 | 高 | 预先测试克隆流程，必要时使用镜像或离线包 | 开放 |
| R3 | 更新范围未明确导致返工 | 官方规范缺乏清晰说明 | 中 | 在 T2 确认官方来源并产出变更清单 | 已缓解 |
| R4 | 长程任务日志过于庞大 | 多轮更新未压缩 | 低 | 定期执行容量检查，必要时在 `.codex/doc-slimming.md` 记录精简策略 | 待评估 |
| R5 | 现有 agentMatcher 测试持续失败影响回归验证 | 历史匹配逻辑未修复或数据集改变 | 中 | 2025-10-11 修复匹配逻辑并更新测试，`npm test -- --run` 已通过 | 已缓解 |
| R6 | 未固化 stdio-only MCP 最佳实践导致运行策略偏离 | 未及时更新 AGENTS/文档或流程 | 中 | 完成 T6 文档更新并在发布前复核流程 | 已缓解 |
| R7 | 验证流程缺乏 `mcp-inspector` 交叉检查导致协议回归漏检 | 仅运行 handshake 脚本未运行 inspector | 中 | 在 T7 实施握手+inspector 组合并记录结果 | 已缓解 |
| R8 | `structuredContent` 工具过度耦合导致后续扩展困难 | T8 未拆分且序列化/统计混杂 | 中 | 拆分模块并增加接口抽象与单元测试 | 已缓解 |
| R9 | 缺乏结构化日志与指标导致质量趋势不可见 | 未实现日志策略且 METRICS 无数据支撑 | 中 | 在 T9 设计并落地日志字段与持久化方案，更新指标表 | 已缓解 |
| R10 | 记忆数据膨胀导致性能下降或数据泄露 | 缺乏记忆裁剪与访问控制策略 | 高 | 在 T10 评估缓存策略、设置数据 TTL 与访问权限，测试内存占用 | 已缓解 |
| R11 | 协议新特性实现与官方规范偏离 | 未实现 `elicitation` 或协议头导致握手失败 | 高 | 参考 2025-06-18 规范落地功能，扩展握手/inspector 验证并增加回归测试 | 已缓解 |
